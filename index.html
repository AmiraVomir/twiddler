<!DOCTYPE html>
<html>
  <head>
    <title>Latest Tweed / Twiddler</title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="stylesheet.css">
  </head>

  <body>

<!-- ===================================
HEADER
=================================== -->

    <header class="header">
      <h1 class="home-btn"><a href="index.html">Tweedler</a></h1>
    </header>

<!-- ===================================
TOP NAV
=================================== -->

    <section class="container">
      <div class="top-nav">
        <h3 class="showNew"><input class="button" type="submit" value="Latest Tweed"></h3>
      </div>
    </section>

<!-- ===================================
LEFT NAV
=================================== -->

    <section class="container">
      <nav class="left-nav">
        <ul>
          <li><a href="#Home">Home</a></li>
          <li><a href="#Explore">Explore</a></li>
          <li><a href="Notifications">Notifications</a></li>
          <li><a href="Messages">Messages</a></li>
          <li><a href="Bookmarks">Bookmarks</a></li>
          <li><a href="Lists">Lists</a></li>
          <li><input class="button" type="submit" value="Tweed" name="TweedButton" ></li>
        </ul>
      </nav>
    </section>

    <!-- ===================================
      TIMELINE
      =================================== -->

      <div class="tweet-container">

      </div>
      <script>

        $(document).ready(function(){
          var $timeLine = $('.tweet-container');
          // $body.html('Loading');

          // var tweetLength = function() {
          //   function count(){
          //     return streams.home.length;
          //   }
          // }
            var index = streams.home.length -1;
            var currentCount = streams.home.length;
            var newCount = currentCount;

            while(index >= 0){
              var tweet = streams.home[index];
              var $tweet = $('<div class="tweets"></div>');
              $tweet.html(tweet.created_at + ' @' + tweet.user + ': ' + tweet.message);
              $tweet.appendTo($timeLine);
              index -= 1;
            }


            function checkTweets(){
              newCount = streams.home.length;
              if(newCount > currentCount) {
                var newIndex = newCount -1;
                showNewTweets(newIndex);
              }
              setTimeout(function() {
                checkTweets();
              }, 5 * 1000)
            }
            checkTweets();

            function showNewTweets(number){
                var tweets = streams.home[number];
                $tweet.html(tweet.created_at + ' @2' + tweet.user + ': ' + tweet.message);
                $tweet.prependTo($timeLine);
            }

            $('.showNew').on("click", showNewTweets);
          });

        </script>

  </body>
</html>
